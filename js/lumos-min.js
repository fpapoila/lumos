function openLumos(e,t){"undefined"==typeof t?(disableButtons([prevButton,nextButton]),isSingleImage=!0):checkButtons($('[class=lumos-link][href="'+e+'"]'),t),lumosContainer.fadeIn(animationSpeed),lumosImage.attr("src",e),lumosGalleryName.text(t)}function getNextImage(e){var t,n=lumosGalleryName.text(),o=lumosImage.attr("src");return"next"==e&&(t=$('[data-lumos="'+n+'"][src="'+o+'"]').parent().next(".lumos-link")),"prev"==e&&(t=$('[data-lumos="'+n+'"][src="'+o+'"]').parent().prev(".lumos-link")),checkButtons(t,n),t.children("img").attr("data-lumos")!=n?o:t.attr("href")}function closeLumos(){lumosContainer.fadeOut(animationSpeed),lumosImage.attr("src",""),lumosGalleryName.text(""),isSingleImage=!1,setTimeout(function(){enableButtons([prevButton,nextButton])},animationSpeed)}function disableButtons(e){for(var t=0;t<e.length;t++)e[t].hide()}function enableButtons(e){for(var t=0;t<e.length;t++)e[t].show()}function checkButtons(e,t){var n=$("[data-lumos='"+t+"']"),o=n[0].getAttribute("src"),r=n[n.length-1].getAttribute("src");e.attr("href")==o?disableButtons([prevButton]):enableButtons([prevButton]),e.attr("href")==r?disableButtons([nextButton]):enableButtons([nextButton])}!function(e){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],e):e("undefined"!=typeof module&&module.exports?require("jquery"):jQuery)}(function(e){function t(t){return!t||void 0!==t.allowPageScroll||void 0===t.swipe&&void 0===t.swipeStatus||(t.allowPageScroll=c),void 0!==t.click&&void 0===t.tap&&(t.tap=t.click),t||(t={}),t=e.extend({},e.fn.swipe.defaults,t),this.each(function(){var o=e(this),r=o.data(k);r||(r=new n(this,t),o.data(k,r))})}function n(t,n){function o(t){if(!(se()||e(t.target).closest(n.excludedElements,Qe).length>0)){var o,r=t.originalEvent?t.originalEvent:t,i=r.touches,l=i?i[0]:r;return Fe=b,i?Xe=i.length:n.preventDefaultEvents!==!1&&t.preventDefault(),$e=0,Re=null,Ae=null,_e=null,Ce=0,Ge=0,Ue=0,je=1,He=0,qe=me(),ue(),pe(0,l),!i||Xe===n.fingers||n.fingers===x||q()?(Ve=Ie(),2==Xe&&(pe(1,i[1]),Ge=Ue=xe(Ye[0].start,Ye[1].start)),(n.swipeStatus||n.pinchStatus)&&(o=R(r,Fe))):o=!1,o===!1?(Fe=L,R(r,Fe),o):(n.hold&&(et=setTimeout(e.proxy(function(){Qe.trigger("hold",[r.target]),n.hold&&(o=n.hold.call(Qe,r,r.target))},this),n.longTapThreshold)),ce(!0),null)}}function B(e){var t=e.originalEvent?e.originalEvent:e;if(Fe!==S&&Fe!==L&&!ae()){var o,r=t.touches,i=r?r[0]:t,l=ge(i);if(We=Ie(),r&&(Xe=r.length),n.hold&&clearTimeout(et),Fe=y,2==Xe&&(0==Ge?(pe(1,r[1]),Ge=Ue=xe(Ye[0].start,Ye[1].start)):(ge(r[1]),Ue=xe(Ye[0].end,Ye[1].end),_e=be(Ye[0].end,Ye[1].end)),je=Te(Ge,Ue),He=Math.abs(Ge-Ue)),Xe===n.fingers||n.fingers===x||!r||q()){if(Re=Le(l.start,l.end),Ae=Le(l.last,l.end),H(e,Ae),$e=ye(l.start,l.end),Ce=we(),he(Re,$e),o=R(t,Fe),!n.triggerOnTouchEnd||n.triggerOnTouchLeave){var u=!0;if(n.triggerOnTouchLeave){var a=Ee(this);u=Oe(l.end,a)}!n.triggerOnTouchEnd&&u?Fe=$(y):n.triggerOnTouchLeave&&!u&&(Fe=$(S)),(Fe==L||Fe==S)&&R(t,Fe)}}else Fe=L,R(t,Fe);o===!1&&(Fe=L,R(t,Fe))}}function N(e){var t=e.originalEvent?e.originalEvent:e,o=t.touches;if(o){if(o.length&&!ae())return le(t),!0;if(o.length&&ae())return!0}return ae()&&(Xe=Ze),We=Ie(),Ce=we(),G()||!C()?(Fe=L,R(t,Fe)):n.triggerOnTouchEnd||0==n.triggerOnTouchEnd&&Fe===y?(n.preventDefaultEvents!==!1&&e.preventDefault(),Fe=S,R(t,Fe)):!n.triggerOnTouchEnd&&z()?(Fe=S,A(t,Fe,h)):Fe===y&&(Fe=L,R(t,Fe)),ce(!1),null}function M(){Xe=0,We=0,Ve=0,Ge=0,Ue=0,je=1,ue(),ce(!1)}function D(e){var t=e.originalEvent?e.originalEvent:e;n.triggerOnTouchLeave&&(Fe=$(S),R(t,Fe))}function P(){Qe.unbind(Be,o),Qe.unbind(Pe,M),Qe.unbind(Ne,B),Qe.unbind(Me,N),De&&Qe.unbind(De,D),ce(!1)}function $(e){var t=e,o=j(),r=C(),i=G();return!o||i?t=L:!r||e!=y||n.triggerOnTouchEnd&&!n.triggerOnTouchLeave?!r&&e==S&&n.triggerOnTouchLeave&&(t=L):t=S,t}function R(e,t){var n,o=e.touches;return(Y()||X())&&(n=A(e,t,g)),(Q()||q())&&n!==!1&&(n=A(e,t,f)),re()&&n!==!1?n=A(e,t,d):ie()&&n!==!1?n=A(e,t,m):oe()&&n!==!1&&(n=A(e,t,h)),t===L&&(X()&&(n=A(e,t,g)),q()&&(n=A(e,t,f)),M(e)),t===S&&(o?o.length||M(e):M(e)),n}function A(t,o,c){var p;if(c==g){if(Qe.trigger("swipeStatus",[o,Re||null,$e||0,Ce||0,Xe,Ye,Ae]),n.swipeStatus&&(p=n.swipeStatus.call(Qe,t,o,Re||null,$e||0,Ce||0,Xe,Ye,Ae),p===!1))return!1;if(o==S&&F()){if(clearTimeout(Ke),clearTimeout(et),Qe.trigger("swipe",[Re,$e,Ce,Xe,Ye,Ae]),n.swipe&&(p=n.swipe.call(Qe,t,Re,$e,Ce,Xe,Ye,Ae),p===!1))return!1;switch(Re){case r:Qe.trigger("swipeLeft",[Re,$e,Ce,Xe,Ye,Ae]),n.swipeLeft&&(p=n.swipeLeft.call(Qe,t,Re,$e,Ce,Xe,Ye,Ae));break;case i:Qe.trigger("swipeRight",[Re,$e,Ce,Xe,Ye,Ae]),n.swipeRight&&(p=n.swipeRight.call(Qe,t,Re,$e,Ce,Xe,Ye,Ae));break;case l:Qe.trigger("swipeUp",[Re,$e,Ce,Xe,Ye,Ae]),n.swipeUp&&(p=n.swipeUp.call(Qe,t,Re,$e,Ce,Xe,Ye,Ae));break;case u:Qe.trigger("swipeDown",[Re,$e,Ce,Xe,Ye,Ae]),n.swipeDown&&(p=n.swipeDown.call(Qe,t,Re,$e,Ce,Xe,Ye,Ae))}}}if(c==f){if(Qe.trigger("pinchStatus",[o,_e||null,He||0,Ce||0,Xe,je,Ye]),n.pinchStatus&&(p=n.pinchStatus.call(Qe,t,o,_e||null,He||0,Ce||0,Xe,je,Ye),p===!1))return!1;if(o==S&&_())switch(_e){case a:Qe.trigger("pinchIn",[_e||null,He||0,Ce||0,Xe,je,Ye]),n.pinchIn&&(p=n.pinchIn.call(Qe,t,_e||null,He||0,Ce||0,Xe,je,Ye));break;case s:Qe.trigger("pinchOut",[_e||null,He||0,Ce||0,Xe,je,Ye]),n.pinchOut&&(p=n.pinchOut.call(Qe,t,_e||null,He||0,Ce||0,Xe,je,Ye))}}return c==h?(o===L||o===S)&&(clearTimeout(Ke),clearTimeout(et),Z()&&!ee()?(Je=Ie(),Ke=setTimeout(e.proxy(function(){Je=null,Qe.trigger("tap",[t.target]),n.tap&&(p=n.tap.call(Qe,t,t.target))},this),n.doubleTapThreshold)):(Je=null,Qe.trigger("tap",[t.target]),n.tap&&(p=n.tap.call(Qe,t,t.target)))):c==d?(o===L||o===S)&&(clearTimeout(Ke),clearTimeout(et),Je=null,Qe.trigger("doubletap",[t.target]),n.doubleTap&&(p=n.doubleTap.call(Qe,t,t.target))):c==m&&(o===L||o===S)&&(clearTimeout(Ke),Je=null,Qe.trigger("longtap",[t.target]),n.longTap&&(p=n.longTap.call(Qe,t,t.target))),p}function C(){var e=!0;return null!==n.threshold&&(e=$e>=n.threshold),e}function G(){var e=!1;return null!==n.cancelThreshold&&null!==Re&&(e=de(Re)-$e>=n.cancelThreshold),e}function U(){return null!==n.pinchThreshold?He>=n.pinchThreshold:!0}function j(){var e;return e=n.maxTimeThreshold&&Ce>=n.maxTimeThreshold?!1:!0}function H(e,t){if(n.preventDefaultEvents!==!1)if(n.allowPageScroll===c)e.preventDefault();else{var o=n.allowPageScroll===p;switch(t){case r:(n.swipeLeft&&o||!o&&n.allowPageScroll!=v)&&e.preventDefault();break;case i:(n.swipeRight&&o||!o&&n.allowPageScroll!=v)&&e.preventDefault();break;case l:(n.swipeUp&&o||!o&&n.allowPageScroll!=w)&&e.preventDefault();break;case u:(n.swipeDown&&o||!o&&n.allowPageScroll!=w)&&e.preventDefault()}}}function _(){var e=V(),t=W(),n=U();return e&&t&&n}function q(){return!!(n.pinchStatus||n.pinchIn||n.pinchOut)}function Q(){return!(!_()||!q())}function F(){var e=j(),t=C(),n=V(),o=W(),r=G(),i=!r&&o&&n&&t&&e;return i}function X(){return!!(n.swipe||n.swipeStatus||n.swipeLeft||n.swipeRight||n.swipeUp||n.swipeDown)}function Y(){return!(!F()||!X())}function V(){return Xe===n.fingers||n.fingers===x||!I}function W(){return 0!==Ye[0].end.x}function z(){return!!n.tap}function Z(){return!!n.doubleTap}function J(){return!!n.longTap}function K(){if(null==Je)return!1;var e=Ie();return Z()&&e-Je<=n.doubleTapThreshold}function ee(){return K()}function te(){return(1===Xe||!I)&&(isNaN($e)||$e<n.threshold)}function ne(){return Ce>n.longTapThreshold&&T>$e}function oe(){return!(!te()||!z())}function re(){return!(!K()||!Z())}function ie(){return!(!ne()||!J())}function le(e){ze=Ie(),Ze=e.touches.length+1}function ue(){ze=0,Ze=0}function ae(){var e=!1;if(ze){var t=Ie()-ze;t<=n.fingerReleaseThreshold&&(e=!0)}return e}function se(){return!(Qe.data(k+"_intouch")!==!0)}function ce(e){Qe&&(e===!0?(Qe.bind(Ne,B),Qe.bind(Me,N),De&&Qe.bind(De,D)):(Qe.unbind(Ne,B,!1),Qe.unbind(Me,N,!1),De&&Qe.unbind(De,D,!1)),Qe.data(k+"_intouch",e===!0))}function pe(e,t){var n={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};return n.start.x=n.last.x=n.end.x=t.pageX||t.clientX,n.start.y=n.last.y=n.end.y=t.pageY||t.clientY,Ye[e]=n,n}function ge(e){var t=void 0!==e.identifier?e.identifier:0,n=fe(t);return null===n&&(n=pe(t,e)),n.last.x=n.end.x,n.last.y=n.end.y,n.end.x=e.pageX||e.clientX,n.end.y=e.pageY||e.clientY,n}function fe(e){return Ye[e]||null}function he(e,t){t=Math.max(t,de(e)),qe[e].distance=t}function de(e){return qe[e]?qe[e].distance:void 0}function me(){var e={};return e[r]=ve(r),e[i]=ve(i),e[l]=ve(l),e[u]=ve(u),e}function ve(e){return{direction:e,distance:0}}function we(){return We-Ve}function xe(e,t){var n=Math.abs(e.x-t.x),o=Math.abs(e.y-t.y);return Math.round(Math.sqrt(n*n+o*o))}function Te(e,t){var n=t/e*1;return n.toFixed(2)}function be(){return 1>je?s:a}function ye(e,t){return Math.round(Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)))}function Se(e,t){var n=e.x-t.x,o=t.y-e.y,r=Math.atan2(o,n),i=Math.round(180*r/Math.PI);return 0>i&&(i=360-Math.abs(i)),i}function Le(e,t){var n=Se(e,t);return 45>=n&&n>=0?r:360>=n&&n>=315?r:n>=135&&225>=n?i:n>45&&135>n?u:l}function Ie(){var e=new Date;return e.getTime()}function Ee(t){t=e(t);var n=t.offset(),o={left:n.left,right:n.left+t.outerWidth(),top:n.top,bottom:n.top+t.outerHeight()};return o}function Oe(e,t){return e.x>t.left&&e.x<t.right&&e.y>t.top&&e.y<t.bottom}var n=e.extend({},n),ke=I||O||!n.fallbackToMouseEvents,Be=ke?O?E?"MSPointerDown":"pointerdown":"touchstart":"mousedown",Ne=ke?O?E?"MSPointerMove":"pointermove":"touchmove":"mousemove",Me=ke?O?E?"MSPointerUp":"pointerup":"touchend":"mouseup",De=ke?O?"mouseleave":null:"mouseleave",Pe=O?E?"MSPointerCancel":"pointercancel":"touchcancel",$e=0,Re=null,Ae=null,Ce=0,Ge=0,Ue=0,je=1,He=0,_e=0,qe=null,Qe=e(t),Fe="start",Xe=0,Ye={},Ve=0,We=0,ze=0,Ze=0,Je=0,Ke=null,et=null;try{Qe.bind(Be,o),Qe.bind(Pe,M)}catch(tt){e.error("events not supported "+Be+","+Pe+" on jQuery.swipe")}this.enable=function(){return Qe.bind(Be,o),Qe.bind(Pe,M),Qe},this.disable=function(){return P(),Qe},this.destroy=function(){P(),Qe.data(k,null),Qe=null},this.option=function(t,o){if("object"==typeof t)n=e.extend(n,t);else if(void 0!==n[t]){if(void 0===o)return n[t];n[t]=o}else{if(!t)return n;e.error("Option "+t+" does not exist on jQuery.swipe.options")}return null}}var o="1.6.15",r="left",i="right",l="up",u="down",a="in",s="out",c="none",p="auto",g="swipe",f="pinch",h="tap",d="doubletap",m="longtap",v="horizontal",w="vertical",x="all",T=10,b="start",y="move",S="end",L="cancel",I="ontouchstart"in window,E=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled&&!I,O=(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&!I,k="TouchSwipe",B={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe",preventDefaultEvents:!0};e.fn.swipe=function(n){var o=e(this),r=o.data(k);if(r&&"string"==typeof n){if(r[n])return r[n].apply(this,Array.prototype.slice.call(arguments,1));e.error("Method "+n+" does not exist on jQuery.swipe")}else if(r&&"object"==typeof n)r.option.apply(this,arguments);else if(!(r||"object"!=typeof n&&n))return t.apply(this,arguments);return o},e.fn.swipe.version=o,e.fn.swipe.defaults=B,e.fn.swipe.phases={PHASE_START:b,PHASE_MOVE:y,PHASE_END:S,PHASE_CANCEL:L},e.fn.swipe.directions={LEFT:r,RIGHT:i,UP:l,DOWN:u,IN:a,OUT:s},e.fn.swipe.pageScroll={NONE:c,HORIZONTAL:v,VERTICAL:w,AUTO:p},e.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:x}}),$("body").append('<div class="lumos-container"><div class="img-alt-text"></div><img src="" /><svg version="1.1" class="lumos-prev" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 306 306" xml:space="preserve"><g><g id="chevron-right"><polygon points="211.7,306 247.4,270.3 130.1,153 247.4,35.7 211.7,0 58.7,153" /></g></g></svg><svg version="1.1" class="lumos-next" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 306 306" xml:space="preserve"><g><g id="chevron-right"><polygon points="94.35,0 58.65,35.7 175.95,153 58.65,270.3 94.35,306 247.35,153" /></g></g></svg><svg version="1.1" class="lumos-close" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><path d="M512,51.75L460.25,0L256,204.25L51.75,0L0,51.75L204.25,256L0,460.25L51.75,512L256,307.75L460.25,512L512,460.25 L307.75,256L512,51.75z" /></svg><div class="lumos-name"></div></div>');var lumosContainer=$(".lumos-container"),lumosImage=$(".lumos-container img"),prevButton=$(".lumos-prev"),nextButton=$(".lumos-next"),closeButton=$(".lumos-close"),linkSelector=".lumos-link",lumosGalleryName=$(".lumos-name"),allButtons=".lumos-next, .lumos-prev, .lumos-close",animationSpeed=250,mouseIsOnImage=!1,isSingleImage=!1;$(linkSelector).click(function(e){e.preventDefault();var t=$(this).attr("href"),n=$(this).children().attr("data-lumos");openLumos(t,n)}),$(prevButton).click(function(){openLumos(getNextImage("prev"),lumosGalleryName.text())}),$(nextButton).click(function(){openLumos(getNextImage("next"),lumosGalleryName.text())}),$(closeButton).click(function(){closeLumos()}),lumosContainer.click(function(){mouseIsOnImage||closeLumos()}),$(document).keyup(function(e){if(27==e.keyCode&&closeLumos(),39==e.keyCode){if(isSingleImage)return;openLumos(getNextImage("next"),lumosGalleryName.text())}if(37==e.keyCode){if(isSingleImage)return;openLumos(getNextImage("prev"),lumosGalleryName.text())}}),lumosImage.mouseenter(function(){mouseIsOnImage=!0}),lumosImage.mouseleave(function(){mouseIsOnImage=!1}),$(allButtons).mouseenter(function(){mouseIsOnImage=!0}),$(allButtons).mouseleave(function(){mouseIsOnImage=!1}),lumosContainer.swipe({swipe:function(e,t){"left"==t&&openLumos(getNextImage("next"),lumosGalleryName.text()),"right"==t&&openLumos(getNextImage("prev"),lumosGalleryName.text()),("up"==t||"down"==t)&&closeLumos()}});